//
//  WeatherDetailsGateway.swift
//  WeatherApp
//
//  Created by Gari Sarkisiani on 31.08.21.
//

import Foundation

typealias GeographicWeatherDataResult = (Result<Data, Error>) -> Void

class WeatherDetailsGateway {
    
    lazy var requestQueue = DispatchQueue(label: "com.weatherapp.requestQueue")
    
    func getGeographicWeatherData(latitude: Double, longitude: Double, complition: @escaping GeographicWeatherDataResult) {
        
        let url = URL(string:"https://api.openweathermap.org/data/2.5/weather?lat=\(latitude)&lon=\(longitude)&units=metric&appid=e9826ddefc1718ac6962acbfc2e4838e")
        
        requestQueue.async {
            let session = URLSession.shared.dataTask(with: url!) { data, response, error in

                DispatchQueue.main.async() {
                    guard let data = data, error == nil else {
                        complition(.failure(error!))
                        return
                    }
                    complition(.success(data))
                }
            }
            session.resume()
        }
        
        
//        let jsonString = "{\"coord\":{\"lon\":44.8306,\"lat\":41.695},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"base\":\"stations\",\"main\":{\"temp\":26.94,\"feels_like\":27.36,\"temp_min\":26.94,\"temp_max\":26.94,\"pressure\":1014,\"humidity\":50},\"visibility\":10000,\"wind\":{\"speed\":2.57,\"deg\":70},\"clouds\":{\"all\":40},\"dt\":1630355526,\"sys\":{\"type\":1,\"id\":8862,\"country\":\"GE\",\"sunrise\":1630376740,\"sunset\":1630424208},\"timezone\":14400,\"id\":611717,\"name\":\"Tbilisi\",\"cod\":200}"
//        complition(.success(jsonString.data(using: .utf8)!))
    }
    
    func getGeographicWeatherForecastData(latitude: Double, longitude: Double, complition: @escaping GeographicWeatherDataResult) {
        
        let url = URL(string: "https://api.openweathermap.org/data/2.5/forecast?lat=\(latitude)&lon=\(longitude)&appid=e9826ddefc1718ac6962acbfc2e4838e")
        
        requestQueue.async {
            let session = URLSession.shared.dataTask(with: url!) { data, response, error in

                DispatchQueue.main.async() {
                    guard let data = data, error == nil else {
                        complition(.failure(error!))
                        return
                    }
                    complition(.success(data))
                }
            }
            session.resume()
        }
//        let jsonString = "{\"cod\":\"200\",\"message\":0,\"cnt\":40,\"list\":[{\"dt\":1630422000,\"main\":{\"temp\":32.94,\"feels_like\":33.69,\"temp_min\":32.76,\"temp_max\":32.94,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":955,\"humidity\":40,\"temp_kf\":0.18},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":0.88,\"deg\":174,\"gust\":2.93},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-08-31 15:00:00\"},{\"dt\":1630432800,\"main\":{\"temp\":30.36,\"feels_like\":31.77,\"temp_min\":25.19,\"temp_max\":30.36,\"pressure\":1010,\"sea_level\":1010,\"grnd_level\":957,\"humidity\":51,\"temp_kf\":5.17},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":6},\"wind\":{\"speed\":4.66,\"deg\":330,\"gust\":7.54},\"visibility\":10000,\"pop\":0.14,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-08-31 18:00:00\"},{\"dt\":1630443600,\"main\":{\"temp\":26.59,\"feels_like\":26.59,\"temp_min\":23.42,\"temp_max\":26.59,\"pressure\":1011,\"sea_level\":1011,\"grnd_level\":958,\"humidity\":66,\"temp_kf\":3.17},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":45},\"wind\":{\"speed\":4.39,\"deg\":330,\"gust\":7.43},\"visibility\":10000,\"pop\":0.17,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-08-31 21:00:00\"},{\"dt\":1630454400,\"main\":{\"temp\":22.54,\"feels_like\":22.96,\"temp_min\":22.54,\"temp_max\":22.54,\"pressure\":1012,\"sea_level\":1012,\"grnd_level\":958,\"humidity\":81,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":38},\"wind\":{\"speed\":3.28,\"deg\":328,\"gust\":5.85},\"visibility\":10000,\"pop\":0.15,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-01 00:00:00\"},{\"dt\":1630465200,\"main\":{\"temp\":22.13,\"feels_like\":22.51,\"temp_min\":22.13,\"temp_max\":22.13,\"pressure\":1013,\"sea_level\":1013,\"grnd_level\":958,\"humidity\":81,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.7,\"deg\":322,\"gust\":4.64},\"visibility\":10000,\"pop\":0.1,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-01 03:00:00\"},{\"dt\":1630476000,\"main\":{\"temp\":28.05,\"feels_like\":28.79,\"temp_min\":28.05,\"temp_max\":28.05,\"pressure\":1011,\"sea_level\":1011,\"grnd_level\":958,\"humidity\":53,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.41,\"deg\":320,\"gust\":3.01},\"visibility\":10000,\"pop\":0.01,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-01 06:00:00\"},{\"dt\":1630486800,\"main\":{\"temp\":33.41,\"feels_like\":33.38,\"temp_min\":33.41,\"temp_max\":33.41,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":956,\"humidity\":35,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":0.63,\"deg\":144,\"gust\":1.69},\"visibility\":10000,\"pop\":0.04,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-01 09:00:00\"},{\"dt\":1630497600,\"main\":{\"temp\":35.61,\"feels_like\":35.12,\"temp_min\":35.61,\"temp_max\":35.61,\"pressure\":1006,\"sea_level\":1006,\"grnd_level\":954,\"humidity\":28,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.29,\"deg\":129,\"gust\":1.92},\"visibility\":10000,\"pop\":0.06,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-01 12:00:00\"},{\"dt\":1630508400,\"main\":{\"temp\":25.97,\"feels_like\":25.97,\"temp_min\":25.97,\"temp_max\":25.97,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":956,\"humidity\":65,\"temp_kf\":0},\"weather\":[{\"id\":501,\"main\":\"Rain\",\"description\":\"moderate rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":26},\"wind\":{\"speed\":4,\"deg\":302,\"gust\":6.91},\"visibility\":10000,\"pop\":0.65,\"rain\":{\"3h\":5.19},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-01 15:00:00\"},{\"dt\":1630519200,\"main\":{\"temp\":22.55,\"feels_like\":22.74,\"temp_min\":22.55,\"temp_max\":22.55,\"pressure\":1010,\"sea_level\":1010,\"grnd_level\":956,\"humidity\":72,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":39},\"wind\":{\"speed\":2.91,\"deg\":331,\"gust\":3.75},\"visibility\":10000,\"pop\":0.85,\"rain\":{\"3h\":1.37},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-01 18:00:00\"},{\"dt\":1630530000,\"main\":{\"temp\":22.59,\"feels_like\":22.71,\"temp_min\":22.59,\"temp_max\":22.59,\"pressure\":1010,\"sea_level\":1010,\"grnd_level\":956,\"humidity\":69,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":9},\"wind\":{\"speed\":1.55,\"deg\":345,\"gust\":2.25},\"visibility\":10000,\"pop\":0.29,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-01 21:00:00\"},{\"dt\":1630540800,\"main\":{\"temp\":21.49,\"feels_like\":21.6,\"temp_min\":21.49,\"temp_max\":21.49,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":955,\"humidity\":73,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":5},\"wind\":{\"speed\":2.51,\"deg\":324,\"gust\":3.35},\"visibility\":10000,\"pop\":0.29,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-02 00:00:00\"},{\"dt\":1630551600,\"main\":{\"temp\":20.73,\"feels_like\":20.79,\"temp_min\":20.73,\"temp_max\":20.73,\"pressure\":1008,\"sea_level\":1008,\"grnd_level\":954,\"humidity\":74,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.19,\"deg\":324,\"gust\":2.87},\"visibility\":10000,\"pop\":0.11,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-02 03:00:00\"},{\"dt\":1630562400,\"main\":{\"temp\":26.82,\"feels_like\":27.03,\"temp_min\":26.82,\"temp_max\":26.82,\"pressure\":1007,\"sea_level\":1007,\"grnd_level\":953,\"humidity\":46,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.53,\"deg\":323,\"gust\":1.8},\"visibility\":10000,\"pop\":0.08,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-02 06:00:00\"},{\"dt\":1630573200,\"main\":{\"temp\":31.6,\"feels_like\":30.59,\"temp_min\":31.6,\"temp_max\":31.6,\"pressure\":1003,\"sea_level\":1003,\"grnd_level\":951,\"humidity\":32,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":1.61,\"deg\":339,\"gust\":2.25},\"visibility\":10000,\"pop\":0.01,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-02 09:00:00\"},{\"dt\":1630584000,\"main\":{\"temp\":31.03,\"feels_like\":30.67,\"temp_min\":31.03,\"temp_max\":31.03,\"pressure\":1002,\"sea_level\":1002,\"grnd_level\":949,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":8.3,\"deg\":329,\"gust\":8.98},\"visibility\":10000,\"pop\":0.05,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-02 12:00:00\"},{\"dt\":1630594800,\"main\":{\"temp\":24.03,\"feels_like\":23.98,\"temp_min\":24.03,\"temp_max\":24.03,\"pressure\":1003,\"sea_level\":1003,\"grnd_level\":950,\"humidity\":57,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":8.3,\"deg\":327,\"gust\":14.65},\"visibility\":10000,\"pop\":0.38,\"rain\":{\"3h\":0.11},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-02 15:00:00\"},{\"dt\":1630605600,\"main\":{\"temp\":20.43,\"feels_like\":20.28,\"temp_min\":20.43,\"temp_max\":20.43,\"pressure\":1006,\"sea_level\":1006,\"grnd_level\":952,\"humidity\":67,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":9.11,\"deg\":324,\"gust\":17.68},\"visibility\":10000,\"pop\":0.24,\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-02 18:00:00\"},{\"dt\":1630616400,\"main\":{\"temp\":18.86,\"feels_like\":18.71,\"temp_min\":18.86,\"temp_max\":18.86,\"pressure\":1008,\"sea_level\":1008,\"grnd_level\":953,\"humidity\":73,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":62},\"wind\":{\"speed\":8.15,\"deg\":322,\"gust\":16.97},\"visibility\":10000,\"pop\":0.34,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-02 21:00:00\"},{\"dt\":1630627200,\"main\":{\"temp\":18.27,\"feels_like\":17.9,\"temp_min\":18.27,\"temp_max\":18.27,\"pressure\":1008,\"sea_level\":1008,\"grnd_level\":953,\"humidity\":67,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":79},\"wind\":{\"speed\":7.61,\"deg\":324,\"gust\":16.05},\"visibility\":10000,\"pop\":0.15,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-03 00:00:00\"},{\"dt\":1630638000,\"main\":{\"temp\":18.07,\"feels_like\":17.68,\"temp_min\":18.07,\"temp_max\":18.07,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":954,\"humidity\":67,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":6.46,\"deg\":322,\"gust\":14.13},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-03 03:00:00\"},{\"dt\":1630648800,\"main\":{\"temp\":22.25,\"feels_like\":21.78,\"temp_min\":22.25,\"temp_max\":22.25,\"pressure\":1009,\"sea_level\":1009,\"grnd_level\":955,\"humidity\":48,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":51},\"wind\":{\"speed\":8.53,\"deg\":313,\"gust\":14.26},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-03 06:00:00\"},{\"dt\":1630659600,\"main\":{\"temp\":25.29,\"feels_like\":24.87,\"temp_min\":25.29,\"temp_max\":25.29,\"pressure\":1007,\"sea_level\":1007,\"grnd_level\":954,\"humidity\":38,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":8.93,\"deg\":330,\"gust\":11.73},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-03 09:00:00\"},{\"dt\":1630670400,\"main\":{\"temp\":23.66,\"feels_like\":23.23,\"temp_min\":23.66,\"temp_max\":23.66,\"pressure\":1007,\"sea_level\":1007,\"grnd_level\":953,\"humidity\":44,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":9.46,\"deg\":333,\"gust\":13.15},\"visibility\":10000,\"pop\":0.02,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-03 12:00:00\"},{\"dt\":1630681200,\"main\":{\"temp\":18.95,\"feels_like\":18.55,\"temp_min\":18.95,\"temp_max\":18.95,\"pressure\":1010,\"sea_level\":1010,\"grnd_level\":955,\"humidity\":63,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":10},\"wind\":{\"speed\":9.87,\"deg\":324,\"gust\":18.59},\"visibility\":10000,\"pop\":0.15,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-03 15:00:00\"},{\"dt\":1630692000,\"main\":{\"temp\":17.35,\"feels_like\":16.81,\"temp_min\":17.35,\"temp_max\":17.35,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":958,\"humidity\":64,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":16},\"wind\":{\"speed\":7.53,\"deg\":318,\"gust\":15.72},\"visibility\":10000,\"pop\":0.05,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-03 18:00:00\"},{\"dt\":1630702800,\"main\":{\"temp\":15.96,\"feels_like\":15.41,\"temp_min\":15.96,\"temp_max\":15.96,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":959,\"humidity\":69,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":2},\"wind\":{\"speed\":7.49,\"deg\":319,\"gust\":14.19},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-03 21:00:00\"},{\"dt\":1630713600,\"main\":{\"temp\":14.78,\"feels_like\":14.14,\"temp_min\":14.78,\"temp_max\":14.78,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":959,\"humidity\":70,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":5.96,\"deg\":326,\"gust\":12.34},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-04 00:00:00\"},{\"dt\":1630724400,\"main\":{\"temp\":14,\"feels_like\":13.36,\"temp_min\":14,\"temp_max\":14,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":960,\"humidity\":73,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":3.91,\"deg\":328,\"gust\":8.89},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 03:00:00\"},{\"dt\":1630735200,\"main\":{\"temp\":19.52,\"feels_like\":18.75,\"temp_min\":19.52,\"temp_max\":19.52,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":47,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":1},\"wind\":{\"speed\":4.13,\"deg\":326,\"gust\":6.5},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 06:00:00\"},{\"dt\":1630746000,\"main\":{\"temp\":24.11,\"feels_like\":23.36,\"temp_min\":24.11,\"temp_max\":24.11,\"pressure\":1015,\"sea_level\":1015,\"grnd_level\":961,\"humidity\":30,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":36},\"wind\":{\"speed\":1.55,\"deg\":20,\"gust\":2.4},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 09:00:00\"},{\"dt\":1630756800,\"main\":{\"temp\":25.33,\"feels_like\":24.6,\"temp_min\":25.33,\"temp_max\":25.33,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":960,\"humidity\":26,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":51},\"wind\":{\"speed\":4.81,\"deg\":110,\"gust\":5.12},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 12:00:00\"},{\"dt\":1630767600,\"main\":{\"temp\":23.35,\"feels_like\":22.58,\"temp_min\":23.35,\"temp_max\":23.35,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":960,\"humidity\":32,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":53},\"wind\":{\"speed\":3.98,\"deg\":87,\"gust\":6.12},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 15:00:00\"},{\"dt\":1630778400,\"main\":{\"temp\":18.62,\"feels_like\":18.1,\"temp_min\":18.62,\"temp_max\":18.62,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":49},\"wind\":{\"speed\":2.71,\"deg\":126,\"gust\":6.11},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2021-09-04 18:00:00\"},{\"dt\":1630789200,\"main\":{\"temp\":18.28,\"feels_like\":17.89,\"temp_min\":18.28,\"temp_max\":18.28,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":66,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":50},\"wind\":{\"speed\":0.37,\"deg\":238,\"gust\":2.36},\"visibility\":10000,\"pop\":0.28,\"rain\":{\"3h\":0.22},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-04 21:00:00\"},{\"dt\":1630800000,\"main\":{\"temp\":17.95,\"feels_like\":17.65,\"temp_min\":17.95,\"temp_max\":17.95,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":71,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":75},\"wind\":{\"speed\":0.7,\"deg\":267,\"gust\":1.23},\"visibility\":10000,\"pop\":0.4,\"rain\":{\"3h\":0.32},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-05 00:00:00\"},{\"dt\":1630810800,\"main\":{\"temp\":18.16,\"feels_like\":17.86,\"temp_min\":18.16,\"temp_max\":18.16,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":70,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":0.49,\"deg\":212,\"gust\":1.09},\"visibility\":10000,\"pop\":0.01,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-05 03:00:00\"},{\"dt\":1630821600,\"main\":{\"temp\":19.86,\"feels_like\":19.47,\"temp_min\":19.86,\"temp_max\":19.86,\"pressure\":1017,\"sea_level\":1017,\"grnd_level\":962,\"humidity\":60,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":96},\"wind\":{\"speed\":1.72,\"deg\":137,\"gust\":2.1},\"visibility\":10000,\"pop\":0,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-05 06:00:00\"},{\"dt\":1630832400,\"main\":{\"temp\":21.1,\"feels_like\":20.73,\"temp_min\":21.1,\"temp_max\":21.1,\"pressure\":1016,\"sea_level\":1016,\"grnd_level\":962,\"humidity\":56,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":98},\"wind\":{\"speed\":2.07,\"deg\":122,\"gust\":2.06},\"visibility\":10000,\"pop\":0.01,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-05 09:00:00\"},{\"dt\":1630843200,\"main\":{\"temp\":24.44,\"feels_like\":24.14,\"temp_min\":24.44,\"temp_max\":24.44,\"pressure\":1014,\"sea_level\":1014,\"grnd_level\":960,\"humidity\":46,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":81},\"wind\":{\"speed\":1.96,\"deg\":151,\"gust\":2.51},\"visibility\":10000,\"pop\":0.01,\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2021-09-05 12:00:00\"}],\"city\":{\"id\":611717,\"name\":\"Tbilisi\",\"coord\":{\"lat\":41.695,\"lon\":44.8306},\"country\":\"GE\",\"population\":1049498,\"timezone\":14400,\"sunrise\":1630376740,\"sunset\":1630424208}}"
//        complition(.success(jsonString.data(using: .utf8)!))
    }
}
